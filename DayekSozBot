from telegram import Update
from telegram.ext import Updater, CommandHandler, MessageHandler, Filters

def start(update: Update, context):
    context.bot.send_message(chat_id=update.effective_chat.id, text="–ú–∞–∑–∞–ª–∞–º–∞ –º–µ–Ω—ñ! –ú–µ–Ω –Ω–∞“õ—Ç—ã–ª–∞–ø –∂–∞—Ç—ã—Ä–º—ã–Ω...")

def echo(update: Update, context):
    context.bot.send_message(chat_id=update.effective_chat.id, text=update.message.text)

def help(update: Update, context):
    context.bot.send_message(chat_id=update.effective_chat.id, text="–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ç–∏–∫–µ—Ä—ã –ø–æ –∫–æ–º–∞–Ω–¥–µ. –ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏ —è –ø—Ä–µ–≤—Ä–∞—â—É –µ–≥–æ –≤ —Å—Ç–∏–∫–µ—Ä! –ò—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É /os")

def create_sticker(update: Update, context):
    message = update.effective_message
    if message.reply_to_message and message.reply_to_message.sticker:
        sticker_emojis = "üòÑ"  # –≠–º–æ–¥–∑–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è —Å—Ç–∏–∫–µ—Ä–∞
        sticker_pack_name = "DayekSoz"  # –ò–º—è —Å—Ç–∏–∫–µ—Ä–ø–∞–∫–∞
        sticker_set_name = "DayekSozStickerSet"  # –ò–º—è —Å—Ç–∏–∫–µ—Ä—Å–µ—Ç–∞

        try:
            context.bot.add_sticker_to_set(
                user_id=update.effective_user.id,
                name=sticker_pack_name,
                emojis=sticker_emojis,
                png_sticker=message.reply_to_message.sticker.file_id
            )

            context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="–°—Ç–∏–∫–µ—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å—Ç–∏–∫–µ—Ä–ø–∞–∫!"
            )
        except Exception as e:
            context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Ç–∏–∫–µ—Ä–∞: {}".format(str(e))
            )
    else:
        context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Å—Ç–∏–∫–µ—Ä. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Ç–∏–∫–µ—Ä–æ–º, —á—Ç–æ–±—ã —è —Å–º–æ–≥ —Å–æ–∑–¥–∞—Ç—å —Å—Ç–∏–∫–µ—Ä."
        )

updater = Updater(token="6251814867:AAHqHHY-vwGKyVL8gPY91w_FjLqb3tNEjBk", use_context=True)
dispatcher = updater.dispatcher

start_handler = CommandHandler('start', start)
dispatcher.add_handler(start_handler)

echo_handler = MessageHandler(Filters.text & (~Filters.command), echo)
dispatcher.add_handler(echo_handler)

help_handler = CommandHandler('help', help)
dispatcher.add_handler(help_handler)

create_sticker_handler = CommandHandler('qos', create_sticker)
dispatcher.add_handler(create_sticker_handler)

updater.start_polling()
